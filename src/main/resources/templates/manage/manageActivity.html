<!--
  @Description: TODO 
 
  @Author    何亚培
  @Version   V1.0  
  @Date      2020/6/28 21:11 
-->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>活动管理</title>
    <meta name="keywords" content="login"/>
    <script src="/static/res/bootstrap/js/jquery.min.js"></script>
    <!--引用公共的bootstrap的内容-->
    <head th:include="/inc/bootstrapbasejs :: bootstrapbasejs"></head>
    <head th:include="/inc/bootstrapbasecss :: bootstrapbasecss"></head>
    <head th:include="/inc/commonutil/echarts :: echarts"></head>
    <head th:include="/inc/commonutil/toastrutil :: toastr"></head>
    <head th:include="/inc/commonutil/lazyImgLoading :: lazyImgLoading"></head>
    <!--table内容居中-->
    <style>


        /*解决页面抖动问题*/
        /*说是有y轴超出时候使用*/
        /*.modal-open{
            overflow-y: scroll;
        }*/
        /*.container{
            padding-right:15px!important;
        }*/

        .table tbody tr td {
            text-align: center; /** 设置水平方向居中 */
            vertical-align: middle /** 设置垂直方向居中 */
        }

        .table th {
            text-align: center; /** 设置水平方向居中 */
            vertical-align: middle /** 设置垂直方向居中 */
        }


        /*翻页*/
        .jump {
            margin: 0px 0;
            float: right;
        }

        .jump_text {
            float: right;
            margin: 0 0 0 5px;
            line-height: 33px;
        }

        .jump_text input {
            width: 40px;
            border: rgba(212, 212, 212, 1.00) 1px solid;
            height: 30px;
            line-height: 33px;
            background: #fff;
        }

        /*取消number的样式*/
        /* google、safari */
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none !important;
            margin: 0;
        }

        /* 火狐 */
        input[type="number"] {
            -moz-appearance: textfield;
        }

    </style>

    <script>
        /*模态框居中*/
        function centerModals() {
            $('#myModal').each(function (i) {
                var $clone = $(this).clone().css('display', 'block').appendTo('body');
                var top = Math.round(($clone.height() - $clone.find('.modal-content').height()) / 2);
                top = top > 0 ? top : 0;
                $clone.remove();
                $(this).find('.modal-content').css("margin-top", top);
            });
        };


        function cp(ipage) {
            $("#pageNum").val(ipage);
            $("#userManagerInfo").append("<input type='hidden' name='pageNum' value='" + ipage + "' />");
            $("#userManagerInfo").submit();
        }


        function goPage(maxPageNum) {
            var jumpPage = document.getElementById("jumpPage").value;
            var totalPage = maxPageNum;
            if (isNaN(jumpPage)) {
                toastr.error("请输入数字!");
                return;
            } else if (jumpPage.length == 0) {
                toastr.error("请输入页码!");
            } else if (jumpPage <= 0 || Number(jumpPage) > Number(totalPage)) {
                toastr.error("非法的页码【" + jumpPage + "】!");
                document.getElementById("jumpPage").value = "";
                return;
            } else {
                var flag = $("input[name='pageNumber']");
                flag.remove();
                $("#userManagerInfo").append("<input type='hidden' name='pageNum' value='" + jumpPage + "' />");
                $("#userManagerInfo").submit();
            }
        }
    </script>


    <script type="text/javascript">
        /**
         * 一键粘贴
         * @param  {String} id [需要粘贴的内容]
         * @param  {String} attr [需要 copy 的属性，默认是 innerText，主要用途例如赋值 a 标签上的 href 链接]
         *
         * range + selection
         *
         * 1.创建一个 range
         * 2.把内容放入 range
         * 3.把 range 放入 selection
         *
         * 注意：参数 attr 不能是自定义属性
         * 注意：对于 user-select: none 的元素无效
         * 注意：当 id 为 false 且 attr 不会空，会直接复制 attr 的内容
         */
        function copy(id, attr) {
            let target = null;

            if (attr) {
                target = document.createElement('div');
                target.id = 'tempTarget';
                target.style.opacity = '0';
                if (id) {
                    let curNode = document.querySelector('#' + id);
                    target.innerText = curNode[attr];
                } else {
                    target.innerText = attr;
                }
                document.body.appendChild(target);
            } else {
                target = document.querySelector('#' + id);
            }

            try {
                let range = document.createRange();
                range.selectNode(target);
                window.getSelection().removeAllRanges();
                window.getSelection().addRange(range);
                document.execCommand('copy');
                window.getSelection().removeAllRanges();
                //console.log('复制成功')
                toastr.success("复制成功!");
            } catch (e) {
                // console.log('复制失败')
                toastr.error("复制失败!");
            }

            if (attr) {
                // remove temp target
                target.parentElement.removeChild(target);
            }
        }

        /**
         * 查询用户的个人信息
         * @param userId
         * @param userName
         */
        function getVoteUserInfoById(userId, userName) {
            if (userId == null) {
                toastr.error("请确认你已选中了用户");
                return;
            }

            showMyCustomLoading("正在为您打开用户 '" + userName + "' 的信息");


            $.ajax({
                url: "/api/admin/manager/user/getUserInfoById",
                data: {userId: userId},
                type: "POST",
                cache: false,
                dataType: "json",
                success: function (response) {
                    hideMyCustomLoading();

                    if (response.status == '200') {
                        $('#voteUserInfoByIdModal').modal("show");
                        let voteUserInfoByIdModalBodyHtml = "<tr>" +
                            "<td><b>用户ID</b></td>" +
                            "<td>" + response.data.id + "</td>" +
                            "</tr>";
                        voteUserInfoByIdModalBodyHtml = voteUserInfoByIdModalBodyHtml + "<tr>" +
                            "<td><b>昵称</b></td>" +
                            "<td>" + response.data.nickName + "</td>" +
                            "</tr>";
                        voteUserInfoByIdModalBodyHtml = voteUserInfoByIdModalBodyHtml + "<tr>" +
                            "<td><b>头像</b></td>" +
                            "<td>" +
                            "<img src='" + response.data.avatarUrl
                            + "' style='width: 30px;height: 30px'>"
                            + "</td>" +
                            "</tr>";


                        voteUserInfoByIdModalBodyHtml = voteUserInfoByIdModalBodyHtml + "<tr>" +
                            "<td><b>用户OPENID</b></td>" +
                            "<td>" + response.data.openId + "</td>" +
                            "</tr>";

                        voteUserInfoByIdModalBodyHtml = voteUserInfoByIdModalBodyHtml + "<tr>" +
                            "<td><b>加入时间</b></td>" +
                            "<td>" + timeStampToDateString(response.data.createTime) + "</td>" +
                            "</tr>";

                        voteUserInfoByIdModalBodyHtml = voteUserInfoByIdModalBodyHtml + "<tr>" +
                            "<td><b>国家</b></td>" +
                            "<td>" + response.data.country + "</td>" +
                            "</tr>";

                        voteUserInfoByIdModalBodyHtml = voteUserInfoByIdModalBodyHtml + "<tr>" +
                            "<td><b>省份</b></td>" +
                            "<td>" + response.data.province + "</td>" +
                            "</tr>";

                        voteUserInfoByIdModalBodyHtml = voteUserInfoByIdModalBodyHtml + "<tr>" +
                            "<td><b>城市</b></td>" +
                            "<td>" + response.data.country + "</td>" +
                            "</tr>";
                        $("#voteUserInfoByIdModalBody").html(voteUserInfoByIdModalBodyHtml);

                    } else {
                        toastr.error(response.message);
                    }
                }, error: function (data, type, err) {
                    toastr.error("操作出现错误，请联系系统管理员");
                    hideMyCustomLoading();
                    // 以下依次是返回过来的数据，错误类型，错误码
                    console.log("请求错误：" + data);
                }
            });


        }

        /**
         * 时间戳转日期格式字符串
         * @param timeStamp
         * @returns {string}
         */
        function timeStampToDateString(timeStamp) {
            let date = new Date(timeStamp + 8 * 3600 * 1000);
            return date.toJSON().substr(0, 19).replace('T', ' ').replace(/-/g, '-');
        }


    </script>


    <script th:inline="javascript">


        function getOrganisersInfoById(organisersId, organisersName) {

            if (organisersId == null) {
                toastr.error("请确认你已选中了公司");
                return;
            }


            $.ajax({
                url: "/api/admin/manager/organisers/getOrganisersInfoById",
                data: {organisersId: organisersId},
                type: "POST",
                cache: false,
                dataType: "json",
                success: function (response) {
                    hideMyCustomLoading();

                    if (response.status == '200') {

                        /*<![CDATA[*/
                        let organisersImgUrl = [[#{weixin.organisers.img.url}]];
                        /*]]>*/
                        $('#organisersInfoByIdModal').modal("show");

                        let organisersInfoByIdModalBodyHtml = "<tr>" +
                            "<td><b>公司ID</b></td>" +
                            "<td>" + response.data.id + "</td>" +
                            "</tr>";

                        organisersInfoByIdModalBodyHtml = organisersInfoByIdModalBodyHtml + "<tr>" +
                            "<td><b>公司名称</b></td>" +
                            "<td>" + response.data.name + "</td>" +
                            "</tr>";

                        organisersInfoByIdModalBodyHtml = organisersInfoByIdModalBodyHtml + "<tr>" +
                            "<td><b>公司logo</b></td>" +
                            "<td title='点击查看大图'>" +
                            "<img alt='点击查看大图'  src='" + organisersImgUrl + response.data.logoImg
                            + "' style='width: 30px;height: 30px;cursor:pointer'" +
                            " onclick=\"javascript:showImage('" +
                            organisersImgUrl + response.data.logoImg + "');\" >"
                            + "</td>" +
                            "</tr>";

                        organisersInfoByIdModalBodyHtml = organisersInfoByIdModalBodyHtml + "<tr>" +
                            "<td><b>公司微信</b></td>" +
                            "<td>" +
                            "<img src='" + organisersImgUrl + response.data.weixinQrCode
                            + "' style='width: 30px;height: 30px;cursor:pointer'" +
                            " onclick=\"javascript:showImage('" +
                            organisersImgUrl + response.data.weixinQrCode + "');\" >"
                            + "</td>" +
                            "</tr>";

                        $("#organisersInfoByIdModalBody").html(organisersInfoByIdModalBodyHtml);

                    } else {
                        toastr.error(response.message);
                    }
                }, error: function (data, type, err) {
                    toastr.error("操作出现错误，请联系系统管理员");
                    hideMyCustomLoading();
                    // 以下依次是返回过来的数据，错误类型，错误码
                    console.log("请求错误：" + data);
                }
            });
        }

        //显示大图
        function showImage(source) {
            $("#ShowImage_Form").find("#img_show").html("<image src='" + source + "' class='carousel-inner img-responsive img-rounded'  />");
            $("#ShowImage_Form").modal();
        }


        function showActiveDetail(activeId) {
            showMyCustomLoading("努力加载活动ID '" + activeId + "' 的数据");

            $.ajax({
                // 使用这种方式 必定 不能使用 restful类型的接口
                url: "/admin/manager/activity/getActiveDetailWithConfOrg",
                data: {activeId: activeId},
                type: "POST",
                cache: false,
                dataType: "html",
                timeout: 10000,
                success: function (response) {
                    hideMyCustomLoading();
                    /*数据的组装*/
                    /*先拿到微信程序图片地址*/
                    /*<![CDATA[*/
                    let organisersImgUrl = [[#{weixin.organisers.img.url}]];
                    /*]]>*/
                    $("#activeDetailByIdModalBody").html(response);
                    $('#activeDetailByIdModal').modal("show");

                }, error: function (data, type, err) {
                    toastr.error("操作出现错误，请联系系统管理员");
                    hideMyCustomLoading();
                    // 以下依次是返回过来的数据，错误类型，错误码
                    console.log("请求错误：" + data);
                }
            });


        }


        function showActiveConfDetail(activeId, activeName) {
            if (activeId == null) {
                toastr.error("请确认你已经选中的活动");
                return;
            }

            showMyCustomLoading("努力加载活动名动名称 '" + activeName + "' 的配置");


            $.ajax({
                url: "/api/admin/manager/activity/getActiveConfDetail",
                data: {activeId: activeId},
                type: "POST",
                cache: false,
                dataType: "json",
                timeout: 10000,
                success: function (response) {
                    hideMyCustomLoading();
                    if (response.status == "200") {

                        console.log(response);


                        /*数据的组装*/
                        /*先拿到微信程序图片地址*/
                        /*<![CDATA[*/
                        let organisersImgUrl = [[#{weixin.organisers.img.url}]];
                        /*]]>*/
                        let organisersInfoByIdModalBodyHtml = "<tr>" +
                            "<td><b>活动名称</b></td>" +
                            "<td>" + response.data.activeName + "</td>" +
                            "</tr>";

                        organisersInfoByIdModalBodyHtml += "<tr>" +
                            "<td><b>活动描述</b></td>" +
                            "<td>" + response.data.activeDesc + "</td>" +
                            "</tr>";

                        organisersInfoByIdModalBodyHtml += "<tr>" +
                            "<td><b>活动奖励</b></td>" +
                            "<td>" + response.data.activeReward + "</td>" +
                            "</tr>";


                        organisersInfoByIdModalBodyHtml += "<tr>" +
                            "<td><b>活动分享图</b></td>" +
                            "<td title='点击查看大图'>" +
                            "<img alt='未能显示活动分享图' src='" + organisersImgUrl + response.data.activeConfShareImg
                            + "' style='width: 30px;height: 30px;cursor:pointer'" +
                            " onclick=\"javascript:showImage('" +
                            organisersImgUrl + response.data.activeConfShareImg + "');\" >"
                            + "</td>" +
                            "</tr>";

                        let activeConfNeedPhone = response.data.activeConfNeedPhone;
                        organisersInfoByIdModalBodyHtml += "<tr>" +
                            "<td><b>需要手机号</b></td>" +
                            "<td>";
                        if (activeConfNeedPhone == 0) {
                            organisersInfoByIdModalBodyHtml += "需要";
                        } else if (activeConfNeedPhone == 1) {
                            organisersInfoByIdModalBodyHtml += "不需要";
                        }
                        organisersInfoByIdModalBodyHtml += "</td>" +
                            "</tr>";

                        let activeConfNeedWeixin = response.data.activeConfNeedWeixin;
                        organisersInfoByIdModalBodyHtml += "<tr>" +
                            "<td><b>需要微信号</b></td>" +
                            "<td>";
                        if (activeConfNeedWeixin == 0) {
                            organisersInfoByIdModalBodyHtml += "需要";
                        } else if (activeConfNeedWeixin == 1) {
                            organisersInfoByIdModalBodyHtml += "不需要";
                        }
                        organisersInfoByIdModalBodyHtml += "</td>" +
                            "</tr>";


                        organisersInfoByIdModalBodyHtml += "<tr>" +
                            "<td><b>活动规则</b></td>" +
                            "<td>" + response.data.activeRule + "</td>" +
                            "</tr>";

                        if (response.data.allowUserUpload) {
                            organisersInfoByIdModalBodyHtml += "<tr>" +
                                "<td><b>允许上传</b></td>" +
                                "<td style='color: green'>允许个人用户上传</td>" +
                                "</tr>";
                            organisersInfoByIdModalBodyHtml += "<tr>" +
                                "<td><b>开始上传</b></td>" +
                                "<td>" + timestampToDateStringDateStyleOne(response.data.allowUploadStartTime) + "</td>" +
                                "</tr>";

                            organisersInfoByIdModalBodyHtml += "<tr>" +
                                "<td><b>结束上传</b></td>" +
                                "<td>" + timestampToDateStringDateStyleOne(response.data.allowUploadEndTime) + "</td>" +
                                "</tr>";
                        } else {

                            organisersInfoByIdModalBodyHtml += "<tr>" +
                                "<td><b>允许上传</b></td>" +
                                "<td style='color: red'>不允许个人用户上传</td>" +
                                "</tr>";
                        }

                        let activeDescImgHtmlCarousel = "";
                        let activeDescImgHtmlInner = "";
                        let activeDescImgS = response.data.activeDescImgS;
                        console.log()
                        if (activeDescImgS != null) {
                            $.each(activeDescImgS, function (index, value) {
                                //alert(index + "..." + value);
                                // if (i )
                                if (index == 0) {
                                    activeDescImgHtmlCarousel += "<li class=\"active\" data-slide-to=\"0\" data-target=\"#carousel-63096\">" +
                                        "</li>";

                                    activeDescImgHtmlInner += "<div class=\"item active\" style='background-color: #a8a8a8;'>" +
                                        "<img style='height: 300px' alt=\"\" src=\"" + organisersImgUrl + value + "\" />" +
                                        "<div class=\"carousel-caption\"><p>活动描述图" + (index + 1) + "</p></div>" +
                                        "</div>";

                                } else {
                                    activeDescImgHtmlCarousel += "<li data-slide-to='" + index + "' data-target=\"#carousel-63096\">" +
                                        "</li>";
                                    activeDescImgHtmlInner += "<div class=\"item\" style='background-color: #a8a8a8;'>" +
                                        "<img style='height: 300px' alt=\"\" src=\"" + organisersImgUrl + value + "\" />" +
                                        "<div class=\"carousel-caption\"><p>活动描述图" + (index + 1) + "</p></div>" +
                                        "</div>";
                                }
                            });
                            organisersInfoByIdModalBodyHtml += "<tr>" +
                                "<td colspan='2'>" +
                                "<div class=\"container\">" +
                                "<div class=\"row clearfix\">" +
                                "<div class=\"col-md-12 column\">" +
                                "<div class=\"carousel slide\" id=\"carousel-63096\">" +
                                "<ol class=\"carousel-indicators\">" +
                                activeDescImgHtmlCarousel +
                                "</ol>" +
                                "<div class=\"carousel-inner\">" +
                                activeDescImgHtmlInner +
                                "</div> <a class=\"left carousel-control\" href=\"#carousel-63096\" data-slide=\"prev\"><span class=\"glyphicon glyphicon-chevron-left\"></span></a> <a class=\"right carousel-control\" href=\"#carousel-63096\" data-slide=\"next\"><span class=\"glyphicon glyphicon-chevron-right\"></span></a>" +
                                "</div>" +
                                "</div>" +
                                "</div>" +
                                "</div>" +
                                "</td>" +
                                "</tr>";
                        }


                        let activeRewardImgHtmlCarousel = "";
                        let activeRewardImgHtmlInner = "";
                        let activeRewardImgS = response.data.activeRewardImgS;
                        if (activeRewardImgS != null) {
                            $.each(activeRewardImgS, function (index, value) {
                                //alert(index + "..." + value);
                                // if (i )
                                if (index == 0) {
                                    activeRewardImgHtmlCarousel += "<li class=\"active\" data-slide-to=\"0\" data-target=\"#carousel-63097\">" +
                                        "</li>";

                                    activeRewardImgHtmlInner += "<div class=\"item active\" style='background-color: #a8a8a8;'>" +
                                        "<img style='height: 300px' alt=\"\" src=\"" + organisersImgUrl + value + "\" />" +
                                        "<div class=\"carousel-caption\"><p>活动奖励图" + (index + 1) + "</p></div>" +
                                        "</div>";

                                } else {
                                    activeRewardImgHtmlCarousel += "<li data-slide-to='" + index + "' data-target=\"#carousel-63097\">" +
                                        "</li>";
                                    activeRewardImgHtmlInner += "<div class=\"item\" style='background-color: #a8a8a8;'>" +
                                        "<img style='height: 300px' alt=\"\" src=\"" + organisersImgUrl + value + "\" />" +
                                        "<div class=\"carousel-caption\"><p>活动奖励图" + (index + 1) + "</p></div>" +
                                        "</div>";
                                }
                            });
                            organisersInfoByIdModalBodyHtml += "<tr>" +
                                "<td colspan='2'>" +
                                "<div class=\"container\">" +
                                "<div class=\"row clearfix\">" +
                                "<div class=\"col-md-12 column\">" +
                                "<div class=\"carousel slide\" id=\"carousel-63097\">" +
                                "<ol class=\"carousel-indicators\">" +
                                activeRewardImgHtmlCarousel +
                                "</ol>" +
                                "<div class=\"carousel-inner\">" +
                                activeRewardImgHtmlInner +
                                "</div> <a class=\"left carousel-control\" href=\"#carousel-63097\" data-slide=\"prev\"><span class=\"glyphicon glyphicon-chevron-left\"></span></a> <a class=\"right carousel-control\" href=\"#carousel-63097\" data-slide=\"next\"><span class=\"glyphicon glyphicon-chevron-right\"></span></a>" +
                                "</div>" +
                                "</div>" +
                                "</div>" +
                                "</div>" +
                                "</td>" +
                                "</tr>";
                        }


                        $("#showActiveConfDetailByIdModalLabel").html(activeName);
                        $("#showActiveConfDetailModalBody").html(organisersInfoByIdModalBodyHtml);
                        $('#showActiveConfDetailByIdModal').modal("show");
                    } else {
                        toastr.error(response.message, "错误");
                    }
                }, error: function (data, type, err) {
                    toastr.error("操作出现错误，请联系系统管理员");
                    hideMyCustomLoading();
                    // 以下依次是返回过来的数据，错误类型，错误码
                    console.log("请求错误：" + data);
                }
            });

        }

    </script>


</head>
<body>

<!--引入等待层-->
<div th:include="/inc/commonutil/toastrutil :: myCustomLoad"></div>
<!--引用时间戳转时间-->
<div th:include="/inc/commonutil/commonUtils :: timestampToDateString"></div>
<!--通用头部信息-->
<div class="container">
    <div th:include="inc/head/simplehead :: header"></div>
</div>


<!--公司信息展示-->
<div class="modal fade" id="showActiveConfDetailByIdModal" role="dialog" aria-labelledby="showActiveConfDetailByIdModal"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="showActiveConfDetailByIdModalLabel">

                </h4>
            </div>
            <div class="modal-body" style="height: 500px;overflow-y: scroll;">
                <fieldset>
                    <div class="table-responsive">
                        <table class="table  table-bordered table-condensed">
                            <tbody id="showActiveConfDetailModalBody">
                            <tr>
                                <td>
                                    正在打开活动配置详细信息。。。
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </fieldset>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <!-- <button type="button" class="btn btn-primary">保存</button>-->
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="activeDetailByIdModal" role="dialog"
     aria-labelledby="activeDetailByIdModal"
     aria-hidden="true" >
    <div class="modal-dialog" >
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body"  id="activeDetailByIdModalBody" th:fragment="activeDetailByIdModalBody">
                <fieldset>
                    <div class="table-responsive" style="height: 500px;overflow-y: scroll;">
                        <table class="table  table-bordered table-condensed">
                            <tbody>
                            <tr>
                                <td>
                                    活动ID
                                </td>
                                <td th:text="${activeDetailWithConfOrgVO?.activeId}">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    活动名称
                                </td>
                                <td>
                                    <input type="text" class="form-control"
                                           th:value="${activeDetailWithConfOrgVO?.activeName}">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    活动描述
                                </td>
                                <td>
                                    <textarea class="form-control"
                                            th:text="${activeDetailWithConfOrgVO?.activeName}">
                                    </textarea>
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    活动图片
                                </td>
                                <td>
                                    <textarea class="form-control"
                                              th:text="${activeDetailWithConfOrgVO?.activeDescImgS}">
                                    </textarea>
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    活动奖励
                                </td>
                                <td>
                                    <input type="text" class="form-control"
                                           th:value="${activeDetailWithConfOrgVO?.activeReward}">
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    活动奖励图片
                                </td>
                                <td>
                                    <textarea type="text" class="form-control"
                                           th:text="${activeDetailWithConfOrgVO?.activeRewardImgS}">
                                    </textarea>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    活动分享图
                                </td>
                                <td>
                                    <textarea type="text" class="form-control"
                                           th:text="${activeDetailWithConfOrgVO?.activeConfShareImg}">
                                    </textarea>
                                </td>
                            </tr>


                           <!-- <tr>
                                <td>
                                    活动状态
                                </td>
                                <td>
                                    <select class="form-control" name="messagePath" id="messagePath" >
                                        &lt;!&ndash; 首先获取 全部类路径 然后找到该类中的遍历 然后获取其中的值 values()
                                             然后定义个变量值进行接收，然后getCode和getMsg获取其中的值，
                                             myTestQuery这个实体类是查询用的数据getCode 然后判断是否进行回显数据 &ndash;&gt;
                                        <option th:each="enum : ${T(com.hyp.blogmaster.pojo.modal.WeixinVoteBase.ActiveStatusEnum).values()}"
                                                th:value="${enum.getCode()}"
                                                th:text="${enum.getMsg()}"
                                                th:selected="${activeDetailWithConfOrgVO?.activeStatus == enum.getCode()}">
                                        </option>
                                    </select>
                                </td>
                            </tr>-->

                           <!-- <tr>
                                <td>
                                    公布首页
                                </td>
                                <td>
                                    <select class="form-control" name="messagePath" id="messagePath" >
                                        <option th:each="enum : ${T(com.hyp.blogmaster.pojo.modal.WeixinVoteBase.ActivePublicEnum).values()}"
                                                th:value="${enum.getCode()}"
                                                th:text="${enum.getMsg()}"
                                                th:selected="${activeDetailWithConfOrgVO?.activePublic == enum.getCode()}">
                                        </option>
                                    </select>
                                </td>
                            </tr>-->

                            <tr>
                                <td>
                                    自主报名
                                </td>
                                <td>
                                    <select class="form-control" name="messagePath" id="messagePath" >
                                        <option th:each="enum : ${T(com.hyp.blogmaster.pojo.modal.WeixinVoteConf.ActiveConfSignUpEnum).values()}"
                                                th:value="${enum.getCode()}"
                                                th:text="${enum.getMsg()}"
                                                th:selected="${activeDetailWithConfOrgVO?.activeConfSignUp == enum.getCode()}">
                                        </option>
                                    </select>
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    自主报名开始时间
                                </td>
                                <td>
                                    <input class="form-control" type="datetime-local"
                                           th:value="${activeDetailWithConfOrgVO?.allowUploadEndTime}"
                                    >
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    自主报名结束时间
                                </td>
                                <td>
                                    <input class="form-control" type="datetime-local"
                                           th:value="${activeDetailWithConfOrgVO?.allowUploadEndTime}">
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    允许重复投票
                                </td>
                                <td>
                                    <select class="form-control" name="messagePath" id="messagePath" >
                                        <option th:each="enum : ${T(com.hyp.blogmaster.pojo.modal.WeixinVoteConf.ActiveConfRepeatVoteEnum).values()}"
                                                th:value="${enum.getCode()}"
                                                th:text="${enum.getMsg()}"
                                                th:selected="${activeDetailWithConfOrgVO?.activeConfRepeatVote == enum.getCode()}">
                                        </option>
                                    </select>
                                </td>
                            </tr>

                            <tr>
                                <td title="分为两部分：格式为 类型（1：每天，2:总共）;票数
例如：1,4 每天；4票 ">
                                    投票规则
                                </td>
                                <td>
                                    <input class="form-control" type="text"
                                           th:value="${activeDetailWithConfOrgVO?.activeConfVoteType}"
                                    >
                                </td>
                            </tr>


                            </tbody>
                        </table>
                    </div>
                </fieldset>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <!-- <button type="button" class="btn btn-primary">保存</button>-->
            </div>
        </div>
    </div>
</div>


<!--公司信息展示-->
<div class="modal fade" id="organisersInfoByIdModal" role="dialog" aria-labelledby="organisersInfoByIdModal"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="organisersInfoByIdModalLabel">

                </h4>
            </div>
            <div class="modal-body">
                <fieldset>
                    <!--<legend>数据为用户最近365天的购买总结</legend>-->

                    <div class="table-responsive">
                        <table class="table  table-bordered table-condensed">
                            <tbody id="organisersInfoByIdModalBody">

                            <tr>
                                <td>
                                    这里追加公司信息内容
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>


                </fieldset>
            </div>
            <div class="modal-footer">
                <!-- <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>-->
                <!-- <button type="button" class="btn btn-primary">保存</button>-->
            </div>
        </div>
    </div>
</div>

﻿
<!--<div id="ShowImage_Form" class="modal">
    <div class="modal-header">
        <button data-dismiss="modal" class="close" type="button"></button>
    </div>
    <div class="modal-body">
        <div id="img_show">
        </div>
    </div>
</div>-->


<!--<div class="modal fade" id="ShowImage_Form" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body">
                <div id="img_show">
                </div>
            </div>
</div>-->

<div class="modal fade" id="ShowImage_Form" role="dialog" aria-labelledby="ShowImage_Form" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body">
                <div id="img_show">
                </div>
            </div>

        </div>
    </div>
</div>

<!--个人用户信息展示-->
<div class="modal fade" id="voteUserInfoByIdModal" role="dialog" aria-labelledby="voteUserInfoByIdModal"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="voteUserInfoByIdModalLabel">

                </h4>
            </div>
            <div class="modal-body">
                <fieldset>
                    <!--<legend>数据为用户最近365天的购买总结</legend>-->

                    <div class="table-responsive">
                        <table class="table  table-bordered table-condensed">
                            <tbody id="voteUserInfoByIdModalBody">

                            <tr>
                                <td>
                                    这里追加用户信息内容
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>


                </fieldset>
            </div>
            <div class="modal-footer">
                <!-- <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>-->
                <!-- <button type="button" class="btn btn-primary">保存</button>-->
            </div>
        </div>
    </div>
</div>


<div class="container">
    <div class="row clearfix">
        <!--中间信息-->
        <div class="col-md-12 column">
            <form role="form" class="form-inline" action="/admin/manager/activity"
                  method="post" id="userManagerInfo">
                <div class="form-group">
                    <label for="query-openId" title="用户openId（非模糊查询）">用户OPENID</label>
                    <input class="form-control" id="query-openId" placeholder="用户openId非模糊" type="text"
                           name="openId" th:value="${manageActivity?.getOpenId()}">
                </div>


                <div class="form-group">
                    <label for="query-organisersName" title="公司名称（模糊查询）">公司名称</label>
                    <input class="form-control" id="query-organisersName" placeholder="公司名称" type="text"
                           name="organisersName" th:value="${manageActivity?.getOrganisersName()}">
                </div>

                <div class="form-group">
                    <label for="query-activeName" title="活动名称（模糊查询）">活动名称</label>
                    <input class="form-control" id="query-activeName" placeholder="活动名称" type="text"
                           name="activeName" th:value="${manageActivity?.getActiveName()}">
                </div>

                <div class="form-group">
                    <label for="query-activePublic" title="是否要在首页进行更新">首页公开</label>
                    <select class="form-control" id="query-activePublic" name="activePublic">
                        <option value="">全部</option>
                        <option value="0" th:selected="${manageActivity?.getActivePublic() == 0}">不公开</option>
                        <option value="1" th:selected="${manageActivity?.getActivePublic() == 1}">公开</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="query-status" title="活动状态">活动状态</label>
                    <select class="form-control" id="query-status" name="status">
                        <option value="">全部</option>
                        <option value="0" th:selected="${manageActivity?.getStatus() == 0}">待审核</option>
                        <option value="1" th:selected="${manageActivity?.getStatus() == 1}">上线</option>
                        <option value="2" th:selected="${manageActivity?.getStatus() == 2}">未开始</option>
                        <option value="3" th:selected="${manageActivity?.getStatus() == 3}">已结束</option>
                        <option value="4" th:selected="${manageActivity?.getStatus() == 4}">未启动</option>
                    </select>
                </div>


                <div class="form-group">
                    <label for="query-order-column" title="排序字段">排序字段</label>
                    <select class="form-control" id="query-order-column" name="orderColumn">

                        <option value="viewCountNum"
                                th:selected="${manageActivity?.getOrderColumn() == 'viewCountNum'}">
                            总浏览
                        </option>
                        <option value="voteCountNum"
                                th:selected="${manageActivity?.getOrderColumn() == 'voteCountNum'}">
                            总投票
                        </option>
                        <option value="activeStartTime"
                                th:selected="${manageActivity?.getOrderColumn() == 'activeStartTime'}">
                            开始时间
                        </option>
                        <option value="activeEndTime"
                                th:selected="${manageActivity?.getOrderColumn() == 'activeEndTime'}">
                            结束时间
                        </option>
                        <option value="createTime" th:selected="${manageActivity?.getOrderColumn() == 'createTime'}">
                            创建时间
                        </option>
                        <option value="updateTime" th:selected="${manageActivity?.getOrderColumn() == 'updateTime'}">
                            更新时间
                        </option>

                    </select>
                </div>


                <div class="form-group">
                    <label for="query-order-by" title="排序方式">排序方式</label>
                    <select class="form-control" id="query-order-by" name="orderBy">
                        <option value="desc" th:selected="${manageActivity?.getOrderBy() == 'desc'}">倒叙</option>
                        <option value="asc" th:selected="${manageActivity?.getOrderBy() == 'asc'}">正序</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="query-pageSize" title="每页所展示的条目数">每页条数</label>
                    <select class="form-control" id="query-pageSize" name="pageSize">
                        <option value="5" th:selected="${manageActivity?.getPageSize() == 5}">5</option>
                        <option value="10" th:selected="${manageActivity?.getPageSize() == 10}">10</option>
                        <option value="15" th:selected="${manageActivity?.getPageSize() == 15}">15</option>
                        <option value="20" th:selected="${manageActivity?.getPageSize() == 20}">20</option>
                        <option value="30" th:selected="${manageActivity?.getPageSize() == 30}">30</option>
                        <option value="40" th:selected="${manageActivity?.getPageSize() == 40}">40</option>
                        <option value="50" th:selected="${manageActivity?.getPageSize() == 50}">50</option>
                    </select>
                </div>


                <button type="submit" class="btn btn-success">查询</button>
            </form>
            <br><br>
        </div>
    </div>
</div>
<!--用户显示页面-->
<div class="container">
    <div class="row clearfix">
        <div class="col-md-12 column">
            <div class="table-responsive">
                <table class="table table-hover table-bordered">
                    <thead>
                    <tr>
                        <th>
                            编号
                        </th>
                        <th>
                            活动ID
                        </th>
                        <th>
                            用户昵称
                        </th>
                        <th>
                            公司名称
                        </th>
                        <th>
                            活动名称
                        </th>
                        <th>
                            封面图片
                        </th>
                        <th>
                            开始时间
                        </th>
                        <th>
                            结束时间
                        </th>
                        <th>
                            创建时间
                        </th>
                        <th>
                            更新时间
                        </th>
                        <th>
                            公开到首页
                        </th>
                        <th>
                            活动状态
                        </th>

                        <th>
                            作品数
                        </th>
                        <th>
                            总浏览
                        </th>
                        <th>
                            总投票
                        </th>

                        <th>

                        </th>

                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="activityManagerDTO,seqNum : ${pageInfo?.getList()}">
                        <td th:text="${seqNum?.index+1}">
                        </td>


                        <td th:text="${activityManagerDTO?.activeId}">
                        </td>

                        <td>
                            <a href="javascript:;"
                               th:onclick="'javascript:getVoteUserInfoById(\''+${activityManagerDTO?.voteUserId}+'\',\''+${activityManagerDTO?.voteUserNickName}+'\');'"
                               title="查看用户数据详情"
                               th:text="${activityManagerDTO?.voteUserNickName}">
                            </a>
                        </td>

                        <td>
                            <a href="javascript:;"
                               th:onclick="'javascript:getOrganisersInfoById(\''+${activityManagerDTO?.organisersId}+'\',\''+${activityManagerDTO?.organisersName}+'\');'"
                               title="查看公司数据详情"
                               th:text="${activityManagerDTO?.organisersName}">
                            </a>
                        </td>

                        <!--活动名称-->
                        <td>
                            <a href="javascript:;"
                               th:onclick="'javascript:showActiveConfDetail(\''+${activityManagerDTO?.activeId}+'\',\''+${activityManagerDTO?.activeName}+'\');'"
                               title="查看活动配置"
                               th:text="${activityManagerDTO?.activeName}">
                            </a>

                        </td>
                        <td>

                            <!--通过if判断是否显示具体的图片-->
                            <a th:if="${!#strings.isEmpty(activityManagerDTO?.activeImg)}"
                               th:href=" @{ #{weixin.user.img.url} + ${#strings.replace(activityManagerDTO?.activeImg,';','')}}"
                               target="_blank"
                               title="打开图片">
                                <img src="/static/res/lazyImgLoading/imglazyloadingtype1.gif"
                                     th:data-lazy="#{weixin.user.img.url} + ${#strings.replace(activityManagerDTO?.activeImg,';','')}"
                                     style="width: 30px;height: 30px">
                            </a>
                            <img th:if="${#strings.isEmpty(activityManagerDTO?.activeImg)}"
                                 src="/static/res/lazyImgLoading/imglazyloadingtype1.gif"
                                 th:data-lazy="@{/static/res/lazyImgLoading/noimgtype1.png}"
                                 style="width: 30px;height: 30px">

                        </td>

                        <td th:text="${#dates.format(activityManagerDTO?.activeStartTime, 'yyyy/MM/dd HH:mm:ss')}">
                        </td>
                        <td th:text="${#dates.format(activityManagerDTO?.activeEndTime, 'yyyy/MM/dd HH:mm:ss')}">
                        </td>
                        <td th:text="${#dates.format(activityManagerDTO?.createTime, 'yyyy/MM/dd HH:mm:ss')}">
                        </td>
                        <td th:text="${#dates.format(activityManagerDTO?.updateTime, 'yyyy/MM/dd HH:mm:ss')}">
                        </td>


                        <td th:switch="${activityManagerDTO?.activePublic}">
                            <span th:case="1">公开</span>
                            <span th:case="0">不公开</span>
                        </td>

                        <td th:switch="${activityManagerDTO?.status}">
                            <span th:case="0">待审核</span>
                            <span th:case="1">上线</span>
                            <span th:case="2">未开始</span>
                            <span th:case="3">已结束</span>
                            <span th:case="4">未启用</span>
                        </td>

                        <td th:text="${activityManagerDTO?.voteWorkCountNum}">
                        </td>
                        <td th:text="${activityManagerDTO?.viewCountNum}">
                        </td>
                        <td th:text="${activityManagerDTO?.voteCountNum}">
                        </td>


                        <td>
                            <a th:href="|javascript:showActiveDetail(${activityManagerDTO?.activeId})|"
                               class='btn btn-xs green'
                               title='管理活动'
                            ><span class='glyphicon glyphicon-th-large'></span></a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>


            <nav>

                <ul class="pagination">
                    <li th:class="${pageInfo?.isHasPreviousPage() == false }?'disabled' : ''"><a
                            th:href="|javascript:cp(${pageInfo?.getPageNum()-1})|">上一页</a>
                    </li>

                    <li th:each="navigatepageNum : ${pageInfo?.getNavigatepageNums()}"
                        th:class="${navigatepageNum == pageInfo?.getPageNum()}?'active' : ''">
                        <a th:href="|javascript:cp(${navigatepageNum})|"
                           th:text="${navigatepageNum}"></a>
                    </li>

                    <li th:class="${!pageInfo?.isHasNextPage()}?'disabled' : ''"><a
                            th:href="|javascript:cp(${pageInfo?.getPageNum()+1})|">下一页</a>
                    </li>
                </ul>


                <div class="jump">
                            <span class="jump_text">
                                当前<label th:title="'当前共有'+${pageInfo?.getSize()}+'条目录'"
                                         th:text="${pageInfo?.getSize()}"></label>/<label
                                    th:title="'每页显示'+${pageInfo?.getPageSize()}+'条目录'"
                                    th:text="${pageInfo?.getPageSize()}"></label>/<label
                                    th:title="'共有'+${pageInfo?.getTotal()}+'条目录'"
                                    th:text="${pageInfo?.getTotal()}"></label>条 | <label
                                    th:title="'当前在第'+${pageInfo?.getPageNum()}+'页'"
                                    th:text="${pageInfo?.getPageNum()}"></label>/<label
                                    th:title="'总共'+${pageInfo?.getPages()}+'页'"
                                    th:text="${pageInfo?.getPages()}"></label>页,跳到
                                <input type="number" name="jumpPage"
                                       id="jumpPage" th:value="${pageInfo?.getPageNum()}"
                                       οnkeyup="this.value=this.value.replace(/[^0-9-]+/,'');">页
                                <button type="button" class="btn btn-primary btn-sm"
                                        th:onclick="|javascript:goPage(${pageInfo?.getTotal()})|">跳转</button>
                            </span>
                </div>


            </nav>
        </div>
    </div>
</div>

</body>
</html>